import os
import yaml
import base64


def build_config():
    print("build config function")

    pem_encoded = "LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQ0KICAgICAgICBNSUlFcEFJQkFBS0NBUUVBcnZLZm5MN1o4T0hCUjVROFd1enJ5UjB2L2pVOTZYdXJqRG1JKzh0NWsySHJKMmJoDQogICAgICAgIHBSMEZ0ajdRZlFTaDZqTTdqMUpkMlArY2tad3JPbFgrbitkZlk1THRBc3hsL0I2OFhxTzdmT1FTbWd5TTVaRzYNCiAgICAgICAgb2VaTU42dURmOVcrUTdNUnYzeHo1VjM4ZzRlOEFmRDRncUcwTVpUanpNY000UVgrVmdHeUNHWkdnNmEvdWJ6TQ0KICAgICAgICBPekRReWtaNUdjUWZqTWJsM3MwbjFSamhaMDZFT2NrOEpnN1h0R3lHREZOcjVQMCtGMVl1Z0h2Wm5SSG5IK2JYDQogICAgICAgIEQ1ZnZZYnJDTkFCY0g5dUY5SkQ4Y1Z4ek9wN0FTNVFqRDI1VEYxYmQrMmE1L3IxQUJmZzdMdldtRTdDcSt5ZHoNCiAgICAgICAgLzVjTkpJekdmVzVtVjBaZzRHQ0UvamtQYmYyRWoxK0VsVXdGelFJREFRQUJBb0lCQVFDMVo5ZEZqVGNQc3V3Qg0KICAgICAgICBtVFBwRkVrOFp5WGw2UkwwSEw5ZkdqVTNnUjdFalZvTEtyMmxtY1JKSnpQOHVVVXBUdFhHNFBIa3RNZEJjOHAzDQogICAgICAgIFpYSHhBY2IxdkhoK29yK2h3NXVvenI0WWcxazBMTzd6OWM0VEZMbVFqZDJIbFg4eEk1QzhxakVYUTVPNHlPdEkNCiAgICAgICAgWUdZZTY3QjdZWldXNFFxcGIvUUx4OW9tSWYxa05DMlVWVEcreE80RjZDdk9HSFZXd1ZmSGUxbXNQUXptUS9PSg0KICAgICAgICBUQ1puL1I1KzBMOHE1bVQ2QWZsUWFEQlFVSGtRRlJMRVZvTmRKdk5ZVHhJUmtzWmp3MG9YNmRvSlRPekJnckgyDQogICAgICAgIHpaemN0TG1iOUorVHFGekZPZFowRnowdkNLaFphdi9XMmpEbDVwV2xpVm5sMWV3ek43VnROdStsVnU1S2k2RmINCiAgICAgICAgR3R6KzhGK1pBb0dCQU5YYnZaZjgyVXlLRFo1ZzdUWW1xUGZFY1FqN1pQMk1TNXN6OUxSR1Zha3YzV243UGtpQQ0KICAgICAgICBKcUZKc2prWndsNGViNUxIUnozWlJqazYzTyt5OWx4aERXOCttVjdNamQ4VDdnS3pnVFpLdEk0VjNncndlSW1IDQogICAgICAgIHVaanBQTTZQbU9LVVdFZ3RnK01LRGZWNGt3UEdqOTZnOXh0bHYyMlBPTlAvQmpFeWlmUkVVMG9KQW9HQkFNQ2ENCiAgICAgICAgZGpTcnlhbFZmRHNUTERQcEdzVG8wSThSYUNtOFZ4TmY1SlJUYThGaHpSZDhUazUydjlPcEp0cm1rOEtyelZqRw0KICAgICAgICA5YStuTUZnRGdGeWpWUjk4bDVzV0VvZU12UWYwYWVNazVTSHhPZk9uYVdxS3JOcElaVUV4RjR4R1pMaHNTSDVjDQogICAgICAgIEdnTCtWeEs1Uk1oUzlsMGlJc2NUQ1dVbHEwZTdISk9XMlBzdmsrZzVBb0dBWU1RcTdtTXZQTDRubGhaZzhrNnkNCiAgICAgICAgRytHVkJmdDM4ZzlXbWZ0WENCbTRSQXc0a0I0bmgzUVUybjJ3Vk9ucEZiQ2s4dk01M1VqSmJvQ2Y1L0RRRVltZA0KICAgICAgICAybGIzQUtHQWZkMVdpNlhCKzZGUGRITk85MnRyM2tKZi8yM3lxR0hMNU5rWjhkRFFVaG5TeStmczZQUjlIckx1DQogICAgICAgIGZxQVovQjJNUEZ0Wis1SEFHRFh4UHhzQ2dZRUFrZ1hsQmJLdkYwQlhrOGZwV3grcTZpNU56RHI5N0JwUGU3TUoNCiAgICAgICAgZEhYa1c4TlJFaGZ3V2FSRmVqdkJEWnJzOGorMFZHNFpSYmlIK09QaU5yOHlOSHBoZEVwOGxBZllxZWx4KzhPTQ0KICAgICAgICBvb2Y4dUs0RXlVejhIU2ZHZDlrbXFEVU1seks2YUc3TlFFWkZFeHgxVDAzTUZMcUsxT1BXUUd5b0hMenhxV1dQDQogICAgICAgIDVnaVEzaTBDZ1lFQWx2NU0xQ0s4cjhRazlrTkJnY2JoK2dIOUZ0RkdRR2grZHNNaXF6blJndzRGTlFRNFVhbkINCiAgICAgICAgOE0vSjdNVGV1MWEyK2FzYjBubUFOdWg5U09UNFZDTTd5VjRvck5aN1VMWC9Xc2JOSE9mVXRoSEdUWFdCN0NzbQ0KICAgICAgICBtRUVmdUxuaW92VTVBZUhkakEwek1QbFpGaUw4Q2dyRDRvQTVqaDZUQXE1ejVRaXhPNEFhNmhJPQ0KICAgICAgICAtLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQ=="
    pem_decoded = base64.b64decode(pem_encoded).decode("utf-8").replace("\r", "")

    config = {
        "bg_name": "test",
        "pem": pem_decoded,
    }
    print(config)

    with open("config.yaml", "w") as f:
        yaml.dump(config, f, default_flow_style=False)


if __name__ == "__main__":
    build_config()
